{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "scopeName": "source.titanscript",
  "fileTypes": [
    "titanscript"
  ],
  "patterns": [
    {
      "include": "#expression"
    }
  ],
  "repository": {
    "expression": {
      "patterns": [
        {
          "include": "#comment"
        },
        {
          "include": "#tag"
        }
      ]
    },
    "comment": {
      "begin": "{note",
      "end": "}",
      "name": "comment.block",
      "patterns": [
        {
          "begin": "{",
          "end": "}"
        }
      ]
    },
    "tag": {
      "name": "meta.tag",
      "begin": "{",
      "beginCaptures": {
        "0": {
          "name": "meta.tag.open"
        }
      },
      "end": "}",
      "endCaptures": {
        "0": {
          "name": "meta.tag.close"
        }
      },
      "patterns": [
        {
          "include": "$self",
          "comment": "nested tags"
        },
        {
          "match": ";",
          "comment": "tag separators",
          "name": "meta.tag.separator"
        },
        {
          "match": "(?<={(?:get|set|perget|perset);)[^;}]+",
          "comment": "get, set, perget, perset keys",
          "name": "variable"
        },
        {
          "match": "(?<=;)(true|false)",
          "name": "constant.language"
        },
        {
          "match": "(?<=;)[0-9]+",
          "name": "constant.numeric"
        },
        {
          "match": "(?<={)[\\w\\.]+",
          "comment": "tag names",
          "name": "entity.name.function"
        },
        {
          "match": "[0-9]{17,20}",
          "comment": "snowflake parameters",
          "name": "constant.numeric"
        }
      ]
    }
  }
}